<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Google.Cloud.Bigtable.V2 | Google.Cloud.Bigtable.V2 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Google.Cloud.Bigtable.V2 | Google.Cloud.Bigtable.V2 ">
    <meta name="generator" content="docfx 2.50.0.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="googlecloudbigtablev2">Google.Cloud.Bigtable.V2</h1>

<p><code>Google.Cloud.Bigtable.V2</code> is a.NET client library for the <a href="https://cloud.google.com/bigtable/">Google Bigtable API</a>.</p>
<p>Note:
This documentation is for version <code>2.2.0</code> of the library.
Some samples may not work with other versions.</p>
<h1 id="installation">Installation</h1>
<p>Install the <code>Google.Cloud.Bigtable.V2</code> package from NuGet. Add it to
your project in the normal way (for example by right-clicking on the
project in Visual Studio and choosing &quot;Manage NuGet Packages...&quot;).</p>
<h1 id="authentication">Authentication</h1>
<p>When running on Google Cloud Platform, no action needs to be taken to authenticate.</p>
<p>Otherwise, the simplest way of authenticating your API calls is to
download a service account JSON file then set the <code>GOOGLE_APPLICATION_CREDENTIALS</code> environment variable to refer to it.
The credentials will automatically be used to authenticate. See the <a href="https://cloud.google.com/docs/authentication/getting-started">Getting Started With
Authentication</a> guide for more details.</p>
<h1 id="getting-started">Getting started</h1>
<p>Common operations are exposed via the
<a href="api/Google.Cloud.Bigtable.V2.BigtableClient.html">BigtableClient</a>
class.</p>
<h1 id="sample-code">Sample code</h1>
<pre><code class="lang-cs">BigtableClient client = BigtableClient.Create();
TableName tableName = new TableName(projectId, instanceId, tableId);

// Insert a row with some cells into the table
await client.MutateRowAsync(
    tableName,
    &quot;user12345&quot;,
    Mutations.SetCell(
        familyName: &quot;Score&quot;,
        columnQualifier: &quot;Level 1&quot;,
        value: 456),
    Mutations.SetCell(
        familyName: &quot;metrics&quot;,
        columnQualifier: &quot;Level 1 - total time&quot;,
        value: 12000));

// Read the row back from the table, but only the latest cell values
// from the &#39;Score&#39; column family
Row row = await client.ReadRowAsync(
    tableName,
    &quot;user12345&quot;,
    filter: RowFilters.Chain(
        RowFilters.FamilyNameExact(&quot;Score&quot;),
        RowFilters.CellsPerColumnLimit(1)));

foreach (Family family in row.Families)
{
    string familyName = family.Name;
    Console.WriteLine($&quot;Family: {familyName}&quot;);

    foreach (Column column in family.Columns)
    {
        BigtableByteString columnQualifier = column.Qualifier;
        BigtableByteString cellValue = column.Cells[0].Value;
        Console.WriteLine(
            $&quot;\tColumn: {(string)columnQualifier}, Value: {(long)cellValue}&quot;);
    }
}
</code></pre><h1 id="client-life-cycle-management">Client life-cycle management</h1>
<p>By default, clients share an internally managed Grpc.Gcp.GcpCallInvoker to
establish gRPC channels with the Bigtable service using default credentials.
This class allows for multiple channels to be used concurrently and
load-balances requests and streams among them. BigtableClient instances are
intended to be ephermal and will reuse an existing GcpCallInvoker instance
behind the scenes where possible.</p>
<p>Note that this reuse is dependent upon the settings which control the usage of
the GcpCallInvoker instance being identical. Accidentally using different settings
when creating different clients could result in unintended performance degredation
as setting up a new GcpCallInvoker is expensive compared to creating a new
BigtableClient.</p>
<pre><code class="lang-cs">// client1 and client3 will share the same GcpCallInvoker, since they both
// use the same default settings. This means they will use the same shared
// set of gRPC channels to the Bigtable service.
// client2 and client4 will share a different GcpCallInvoker, since they both
// use the same custom MaxChannels/PreferredMaxStreamsPerChannel settings.
BigtableServiceApiSettings settings1 = BigtableServiceApiSettings.GetDefault();
BigtableClient client1 = new BigtableClientBuilder { Settings = settings1 }.Build();

BigtableServiceApiSettings settings2 = new BigtableServiceApiSettings
{
    MaxChannels = 10,
    PreferredMaxStreamsPerChannel = 4
};
BigtableClient client2 = new BigtableClientBuilder { Settings = settings2 }.Build();

BigtableServiceApiSettings settings3 = BigtableServiceApiSettings.GetDefault();
BigtableClient client3 = new BigtableClientBuilder { Settings = settings3 }.Build();

BigtableServiceApiSettings settings4 = new BigtableServiceApiSettings
{
    MaxChannels = 10,
    PreferredMaxStreamsPerChannel = 4
};
BigtableClient client4 = new BigtableClientBuilder { Settings = settings4 }.Build();

// client5 will not share a GcpCallInvoker with any of the other clients, since
// its MaxChannels/PreferredMaxStreamsPerChannel settings differ from the others.
BigtableServiceApiSettings settings5 = new BigtableServiceApiSettings
{
    MaxChannels = 15,
    PreferredMaxStreamsPerChannel = 4
};
BigtableClient client5 = new BigtableClientBuilder { Settings = settings5 }.Build();
</code></pre><h1 id="non-default-credentials">Non-default credentials</h1>
<p>If you would like to create clients which share a GcpCallInvoker but do not
use the default credentials, this can easily be done by manually creating a
GcpCallInvoker and using Bigtable&#39;s default endpoint and settings.</p>
<pre><code class="lang-cs">// Create a client from a custom credentials and a GcpCallInvoker that has
// non-default gRPC stream/channel options.
// Note: the GcpCallInvoker should be long-lived while the BigtableClient
// instances can be ephemeral and each use the same call invoker.
BigtableServiceApiSettings settings = new BigtableServiceApiSettings
{
    MaxChannels = 10,
    PreferredMaxStreamsPerChannel = 4
};
string endpoint = BigtableServiceApiClient.DefaultEndpoint.ToString();
GcpCallInvoker callInvoker = new GcpCallInvoker(endpoint, credentials,
    GrpcCoreAdapter.Instance.ConvertOptions(settings.CreateChannelOptions()));

// These will share the same set of channels to the Bigtable service.
BigtableClient client1 = new BigtableClientBuilder
{
    CallInvoker = callInvoker,
    Settings = settings
}.Build();
// ...
BigtableClient client2 = new BigtableClientBuilder
{
    CallInvoker = callInvoker,
    Settings = settings
}.Build();
// ...

await callInvoker.ShutdownAsync();

// Alternatively, to just create a GcpCallInvoker will standard settings, but using non-default
// credentials, use null or BigtableServiceApiSettings.GetDefault() for the settings.
// Note that CreateChannelOptions() is an extension method which allows the receiver to be null,
// and will just act as if the default settings were specified.
settings = null;
var channelOptions = settings.CreateChannelOptions();
callInvoker = new GcpCallInvoker(endpoint, credentials, GrpcCoreAdapter.Instance.ConvertOptions(channelOptions));
BigtableClient client3 = new BigtableClientBuilder
{
    CallInvoker = callInvoker,
    Settings = settings
}.Build();
// ...

await callInvoker.ShutdownAsync();
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
             
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
