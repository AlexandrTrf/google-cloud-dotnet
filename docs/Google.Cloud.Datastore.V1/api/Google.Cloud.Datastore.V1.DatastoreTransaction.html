<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class DatastoreTransaction
   | Google.Cloud.Datastore.V1 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class DatastoreTransaction
   | Google.Cloud.Datastore.V1 ">
    <meta name="generator" content="docfx 2.50.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction">
  
  
  <h1 id="Google_Cloud_Datastore_V1_DatastoreTransaction" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction" class="text-break">Class DatastoreTransaction
  </h1>
  <div class="markdown level0 summary"><p>
Convenience wrapper around a Datastore transaction. All mutation operations (<a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Insert_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__">Insert(IEnumerable&lt;Entity&gt;)</a>,
<a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__">Delete(IEnumerable&lt;Key&gt;)</a>, <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Update_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__">Update(IEnumerable&lt;Entity&gt;)</a> and <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Upsert_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__">Upsert(IEnumerable&lt;Entity&gt;)</a>)
merely add to a list of mutations which are performed in a single <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Commit_Google_Api_Gax_Grpc_CallSettings_">Commit(CallSettings)</a> or <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_CommitAsync_Google_Api_Gax_Grpc_CallSettings_">CommitAsync(CallSettings)</a>
operation. This means the mutation methods are all synchronous and do not take call settings, as they don&apos;t perform any
API operations.
</p>
<p>Datastore limits the number of entities that can be modified in a Commit operation, and therefore one transaction. When modifying a large
number of entities, partition the changes into multiple transactions. See
<a href="https://cloud.google.com/datastore/docs/concepts/limits">Datastore limits</a> for more details on Datastore limits.</p>
<p>
Even though transactions aren&apos;t inherently related to a specific partition ID, the expected usage is that queries run inside
a transaction are likely to be in a single partition, specified in a <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreDb.html">DatastoreDb</a> used to create the transaction.
</p>
<p>
Disposing of a transaction calls <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Rollback_Google_Api_Gax_Grpc_CallSettings_">Rollback(CallSettings)</a> if the transaction has not already been committed
or rolled back.
</p>
<p>
This is an abstract class, implemented by <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransactionImpl.html">DatastoreTransactionImpl</a> for production use. Users creating their own
<a class="xref" href="Google.Cloud.Datastore.V1.DatastoreDb.html">DatastoreDb</a> subclasses may choose to create fake implementations for testing purposes. There are no abstract
methods in this class; instead, all methods either delegate to another or throw <span class="xref">System.NotImplementedException</span>.
</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <div class="inheritance">
    <h5>Inheritance</h5>
    <div class="level0"><span class="xref">System.Object</span></div>
    <div class="level1"><span class="xref">DatastoreTransaction</span></div>
      <div class="level2"><a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransactionImpl.html">DatastoreTransactionImpl</a></div>
  </div>
  <div classs="implements">
    <h5>Implements</h5>
    <div><span class="xref">System.IDisposable</span></div>
  </div>
  <div class="inheritedMembers">
    <h5>Inherited Members</h5>
    <div>
      <span class="xref">System.Object.GetHashCode()</span>
    </div>
    <div>
      <span class="xref">System.Object.GetType()</span>
    </div>
    <div>
      <span class="xref">System.Object.MemberwiseClone()</span>
    </div>
    <div>
      <span class="xref">System.Object.ToString()</span>
    </div>
  </div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Google.Cloud.Datastore.V1.html">Google.Cloud.Datastore.V1</a></h6>
  <h6><strong>Assembly</strong>: Google.Cloud.Datastore.V1.dll</h6>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public abstract class DatastoreTransaction : IDisposable</code></pre>
  </div>
  <h3 id="properties">Properties
  </h3>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_TransactionId_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.TransactionId*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_TransactionId" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.TransactionId">TransactionId</h4>
  <div class="markdown level1 summary"><p>The ID of the transaction, used implicitly in operations performed with this object.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual ByteString TransactionId { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Protobuf.ByteString.html">ByteString</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="methods">Methods
  </h3>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Commit_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Commit*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Commit_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Commit(Google.Api.Gax.Grpc.CallSettings)">Commit(CallSettings)</h4>
  <div class="markdown level1 summary"><p>Commits all mutations in this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual CommitResponse Commit(CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.CommitResponse.html">CommitResponse</a></td>
        <td><p>The response from the commit operation. This can be used to determine server-allocated keys.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Commit_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Any entities with incomplete keys that are assigned keys by this operation will be updated in memory
with the server-allocated keys.</p>
<p>Datastore limits the number of entities that can be modified in a Commit operation, and therefore one transaction. When modifying a large
number of entities, partition the changes into multiple transactions. See
<a href="https://cloud.google.com/datastore/docs/concepts/limits">Datastore limits</a> for more details on Datastore limits.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Commit_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;message&quot;);
using (DatastoreTransaction transaction = db.BeginTransaction())
{
    Entity entity = new Entity
    {
        Key = keyFactory.CreateIncompleteKey(),
        [&quot;message&quot;] = &quot;Hello&quot;
    };
    // This adds the entity to a collection in memory: nothing
    // is sent to the server.
    transaction.Insert(entity);
    // Without the Commit call, the transaction will automatically
    // be rolled back. The Commit call performs all the mutations
    // within the transaction.
    transaction.Commit();
}
</code></pre></div>
  </div>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.InvalidOperationException</span></td>
        <td><p>The transaction has already been committed or rolled back.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_CommitAsync_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.CommitAsync*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_CommitAsync_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.CommitAsync(Google.Api.Gax.Grpc.CallSettings)">CommitAsync(CallSettings)</h4>
  <div class="markdown level1 summary"><p>Commits all mutations in this transaction asynchronously.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task&lt;CommitResponse&gt; CommitAsync(CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.CommitResponse.html">CommitResponse</a>&gt;</td>
        <td><p>The response from the commit operation. This can be used to determine server-allocated keys.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_CommitAsync_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Any entities with incomplete keys that are assigned keys by this operation will be updated in memory
with the server-allocated keys.</p>
<p>Datastore limits the number of entities that can be modified in a Commit operation, and therefore one transaction. When modifying a large
number of entities, partition the changes into multiple transactions. See
<a href="https://cloud.google.com/datastore/docs/concepts/limits">Datastore limits</a> for more details on Datastore limits.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_CommitAsync_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Commit_Google_Api_Gax_Grpc_CallSettings_">Commit</a> for a synchronous example.</p>
</div>
  </div>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.InvalidOperationException</span></td>
        <td><p>The transaction has already been committed or rolled back.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Create_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Create*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Create_Google_Cloud_Datastore_V1_DatastoreClient_System_String_System_String_Google_Protobuf_ByteString_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Create(Google.Cloud.Datastore.V1.DatastoreClient,System.String,System.String,Google.Protobuf.ByteString)">Create(DatastoreClient, String, String, ByteString)</h4>
  <div class="markdown level1 summary"><p>Constructs an instance of <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreClientImpl.html">DatastoreClientImpl</a> with the given arguments.
Clients using the <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreDb.html">DatastoreDb</a> abstraction layer would normally call
<a class="xref" href="Google.Cloud.Datastore.V1.DatastoreDb.html#Google_Cloud_Datastore_V1_DatastoreDb_BeginTransaction_Google_Api_Gax_Grpc_CallSettings_">BeginTransaction(CallSettings)</a> or <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreDb.html#Google_Cloud_Datastore_V1_DatastoreDb_BeginTransactionAsync_Google_Api_Gax_Grpc_CallSettings_">BeginTransactionAsync(CallSettings)</a>
instead of calling this method directly.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static DatastoreTransaction Create(DatastoreClient client, string projectId, string namespaceId, ByteString transactionId)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.DatastoreClient.html">DatastoreClient</a></td>
        <td><span class="parametername">client</span></td>
        <td><p>The client to use for Datastore operations. Must not be null.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">projectId</span></td>
        <td><p>The ID of the project of the Datastore operations. Must not be null.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">namespaceId</span></td>
        <td><p>The ID of the namespace which is combined with <code data-dev-comment-type="paramref" class="paramref">projectId</code> to form a partition ID
to use in query operations. May be null.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Protobuf.ByteString.html">ByteString</a></td>
        <td><span class="parametername">transactionId</span></td>
        <td><p>The transaction obtained by an earlier <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreClient.html#Google_Cloud_Datastore_V1_DatastoreClient_BeginTransaction_System_String_Google_Api_Gax_Grpc_CallSettings_">BeginTransaction(String, CallSettings)</a>
or the asynchronous equivalent. Must not be null</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html">DatastoreTransaction</a></td>
        <td><p>A <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html">DatastoreTransaction</a> representation of the specified transaction.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Delete*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_Google_Cloud_Datastore_V1_Entity___" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Delete(Google.Cloud.Datastore.V1.Entity[])">Delete(Entity[])</h4>
  <div class="markdown level1 summary"><p>Adds delete operations for all the specified keys to this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Delete(params Entity[] entities)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>[]</td>
        <td><span class="parametername">entities</span></td>
        <td><p>The entities to delete. Must not be null.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_Google_Cloud_Datastore_V1_Entity____remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__">Delete(IEnumerable&lt;Entity&gt;)</a>.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_Google_Cloud_Datastore_V1_Entity____snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;message&quot;);
Entity message = new Entity
{
    Key = keyFactory.CreateIncompleteKey(),
    [&quot;text&quot;] = &quot;Hello&quot;,
};
db.Insert(message);

Entity fetchedBeforeDeletion = db.Lookup(message.Key);

using (DatastoreTransaction transaction = db.BeginTransaction())
{
    // This adds the entity key to a collection of mutations in memory: nothing
    // is sent to the server. Only the key from the entity is used to determine what to delete.
    // If you already have the key but not the entity, use Delete(Key[]) or
    // a similar overload.
    transaction.Delete(message);
    // Without the Commit call, the transaction will automatically
    // be rolled back. The Commit call performs all the mutations
    // within the transaction.
    transaction.Commit();
}

Entity fetchedAfterDeletion = db.Lookup(message.Key);

Console.WriteLine($&quot;Entity exists before deletion? {fetchedBeforeDeletion != null}&quot;);
Console.WriteLine($&quot;Entity exists after deletion? {fetchedAfterDeletion != null}&quot;);
</code></pre></div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Delete*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_Google_Cloud_Datastore_V1_Key___" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Delete(Google.Cloud.Datastore.V1.Key[])">Delete(Key[])</h4>
  <div class="markdown level1 summary"><p>Adds deletion operations for all the specified keys to this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Delete(params Key[] keys)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Key.html">Key</a>[]</td>
        <td><span class="parametername">keys</span></td>
        <td><p>The keys to delete. Must not be null.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_Google_Cloud_Datastore_V1_Key____remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__">Delete(IEnumerable&lt;Key&gt;)</a>.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_Google_Cloud_Datastore_V1_Key____snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;message&quot;);
Entity message = new Entity
{
    Key = keyFactory.CreateIncompleteKey(),
    [&quot;text&quot;] = &quot;Hello&quot;,
};
Key key = db.Insert(message);

Entity fetchedBeforeDeletion = db.Lookup(key);

using (DatastoreTransaction transaction = db.BeginTransaction())
{
    // This adds the key to a collection of mutations in memory: nothing
    // is sent to the server. Only the key is required to determine what to delete.
    // If you have an entity with the right key, you can use Delete(Entity[])
    // or a similar overload for convenience.
    transaction.Delete(key);
    // Without the Commit call, the transaction will automatically
    // be rolled back. The Commit call performs all the mutations
    // within the transaction.
    transaction.Commit();
}

Entity fetchedAfterDeletion = db.Lookup(key);

Console.WriteLine($&quot;Entity exists before deletion? {fetchedBeforeDeletion != null}&quot;);
Console.WriteLine($&quot;Entity exists after deletion? {fetchedAfterDeletion != null}&quot;);
</code></pre></div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Delete*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Delete(System.Collections.Generic.IEnumerable{Google.Cloud.Datastore.V1.Entity})">Delete(IEnumerable&lt;Entity&gt;)</h4>
  <div class="markdown level1 summary"><p>Adds delete operations for all the specified keys to this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Delete(IEnumerable&lt;Entity&gt; entities)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IEnumerable</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>&gt;</td>
        <td><span class="parametername">entities</span></td>
        <td><p>The entities to delete. Must not be null.</p>
</td>
      </tr>
    </tbody>
  </table>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity___snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_Google_Cloud_Datastore_V1_Entity___">Delete</a> for an example using an alternative overload.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Delete*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Delete(System.Collections.Generic.IEnumerable{Google.Cloud.Datastore.V1.Key})">Delete(IEnumerable&lt;Key&gt;)</h4>
  <div class="markdown level1 summary"><p>Adds deletion operations for all the specified keys to this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Delete(IEnumerable&lt;Key&gt; keys)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IEnumerable</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Key.html">Key</a>&gt;</td>
        <td><span class="parametername">keys</span></td>
        <td><p>The keys to delete. Must not be null.</p>
</td>
      </tr>
    </tbody>
  </table>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key___snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Delete_Google_Cloud_Datastore_V1_Entity___">Delete</a> for an example using an alternative overload.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Dispose_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Dispose*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Dispose" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Dispose">Dispose()</h4>
  <div class="markdown level1 summary"><p>If the transaction has already been committed, this operation is a no-op.
Otherwise, it rolls back the transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Dispose()</code></pre>
  </div>
  <h5 class="implements">Implements</h5>
      <div><span class="xref">System.IDisposable.Dispose()</span></div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Insert_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Insert*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Insert_Google_Cloud_Datastore_V1_Entity___" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Insert(Google.Cloud.Datastore.V1.Entity[])">Insert(Entity[])</h4>
  <div class="markdown level1 summary"><p>Adds insert operations for all the specified keys to this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Insert(params Entity[] entities)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>[]</td>
        <td><span class="parametername">entities</span></td>
        <td><p>The entities to insert. Must not be null.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Insert_Google_Cloud_Datastore_V1_Entity____remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Insert_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__">Insert(IEnumerable&lt;Entity&gt;)</a>.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Insert_Google_Cloud_Datastore_V1_Entity____snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;message&quot;);
using (DatastoreTransaction transaction = db.BeginTransaction())
{
    Entity entity = new Entity
    {
        Key = keyFactory.CreateIncompleteKey(),
        [&quot;message&quot;] = &quot;Hello&quot;
    };
    // This adds the entity to a collection in memory: nothing
    // is sent to the server.
    transaction.Insert(entity);
    // Without the Commit call, the transaction will automatically
    // be rolled back. The Commit call performs all the mutations
    // within the transaction.
    transaction.Commit();
}
</code></pre></div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Insert_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Insert*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Insert_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Insert(System.Collections.Generic.IEnumerable{Google.Cloud.Datastore.V1.Entity})">Insert(IEnumerable&lt;Entity&gt;)</h4>
  <div class="markdown level1 summary"><p>Adds insert operations for all the specified keys to this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Insert(IEnumerable&lt;Entity&gt; entities)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IEnumerable</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>&gt;</td>
        <td><span class="parametername">entities</span></td>
        <td><p>The entities to insert. Must not be null.</p>
</td>
      </tr>
    </tbody>
  </table>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Insert_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity___snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Insert_Google_Cloud_Datastore_V1_Entity___">Insert</a> for an example using an alternative overload.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Lookup*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Lookup(Google.Cloud.Datastore.V1.Key,Google.Api.Gax.Grpc.CallSettings)">Lookup(Key, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Looks up a single entity by key.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Entity Lookup(Key key, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Key.html">Key</a></td>
        <td><span class="parametername">key</span></td>
        <td><p>The key to look up. Must not be null, and must be complete.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to this RPC call.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a></td>
        <td><p>The entity with the specified key, or <code>null</code> if no such entity exists.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method simply delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__Google_Api_Gax_Grpc_CallSettings_">Lookup(IEnumerable&lt;Key&gt;, CallSettings)</a>.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key___">Lookup</a> for an example using an alternative overload.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Lookup*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key___" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Lookup(Google.Cloud.Datastore.V1.Key[])">Lookup(Key[])</h4>
  <div class="markdown level1 summary"><p>Looks up a collection of entities by key.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual IReadOnlyList&lt;Entity&gt; Lookup(params Key[] keys)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Key.html">Key</a>[]</td>
        <td><span class="parametername">keys</span></td>
        <td><p>The keys to look up. Must not be null, and every element must be non-null and refer to a complete key.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IReadOnlyList</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>&gt;</td>
        <td><p>A collection of entities with the same size as <code data-dev-comment-type="paramref" class="paramref">keys</code>, containing corresponding entity
references, or <code>null</code> where the key was not found.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key____remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
This call may perform multiple RPC operations in order to look up all keys.
</p>
<p>
This overload does not support the <a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a> to be specified due to restrictions with
methods containing a parameter array and optional parameters.
It simply delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__Google_Api_Gax_Grpc_CallSettings_">Lookup(IEnumerable&lt;Key&gt;, CallSettings)</a>, passing in a <code>null</code>
value for the call settings.
</p>
<p>Datastore limits the number of entities that can be looked up in a single operation. When looking up a large
number of entities, partition the look-ups into batches. See
<a href="https://cloud.google.com/datastore/docs/concepts/limits">Datastore limits</a> for more details on Datastore limits.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key____snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;message&quot;);
Entity message = new Entity { Key = keyFactory.CreateIncompleteKey(), [&quot;text&quot;] = &quot;Original&quot; };
db.Insert(message);

using (DatastoreTransaction transaction = db.BeginTransaction())
{
    // Look the message up at the start of the transaction
    Entity fetched1 = transaction.Lookup(message.Key);
    Console.WriteLine((string) fetched1[&quot;text&quot;]); // &quot;Original&quot;

    // Update the message outside the transaction
    message[&quot;text&quot;] = &quot;Updated&quot;;
    db.Update(message);

    // Look up the message up again. We are guaranteed not to see the
    // update because it occurred after the start of the transaction.
    Entity fetched2 = transaction.Lookup(message.Key);
    Console.WriteLine((string) fetched2[&quot;text&quot;]); // Still &quot;Original&quot;
}
</code></pre></div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Lookup*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Lookup(System.Collections.Generic.IEnumerable{Google.Cloud.Datastore.V1.Key},Google.Api.Gax.Grpc.CallSettings)">Lookup(IEnumerable&lt;Key&gt;, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Looks up a collection of entities by key.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual IReadOnlyList&lt;Entity&gt; Lookup(IEnumerable&lt;Key&gt; keys, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IEnumerable</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Key.html">Key</a>&gt;</td>
        <td><span class="parametername">keys</span></td>
        <td><p>The keys to look up. Must not be null, and every element must be non-null and refer to a complete key.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IReadOnlyList</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>&gt;</td>
        <td><p>A collection of entities with the same size as <code data-dev-comment-type="paramref" class="paramref">keys</code>, containing corresponding entity
references, or <code>null</code> where the key was not found.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This call may perform multiple RPC operations in order to look up all keys.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key___">Lookup</a> for an example using an alternative overload.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.LookupAsync*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_Google_Cloud_Datastore_V1_Key_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.LookupAsync(Google.Cloud.Datastore.V1.Key,Google.Api.Gax.Grpc.CallSettings)">LookupAsync(Key, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Looks up a single entity by key asynchronously.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task&lt;Entity&gt; LookupAsync(Key key, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Key.html">Key</a></td>
        <td><span class="parametername">key</span></td>
        <td><p>The key to look up. Must not be null, and must be complete.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to this RPC call.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>&gt;</td>
        <td><p>The entity with the specified key, or <code>null</code> if no such entity exists.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_Google_Cloud_Datastore_V1_Key_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method simply delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__Google_Api_Gax_Grpc_CallSettings_">LookupAsync(IEnumerable&lt;Key&gt;, CallSettings)</a>.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_Google_Cloud_Datastore_V1_Key_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key___">Lookup</a> for a synchronous example.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.LookupAsync*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_Google_Cloud_Datastore_V1_Key___" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.LookupAsync(Google.Cloud.Datastore.V1.Key[])">LookupAsync(Key[])</h4>
  <div class="markdown level1 summary"><p>Looks up a collection of entities by key asynchronously.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task&lt;IReadOnlyList&lt;Entity&gt;&gt; LookupAsync(params Key[] keys)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Key.html">Key</a>[]</td>
        <td><span class="parametername">keys</span></td>
        <td><p>The keys to look up. Must not be null, and every element must be non-null and refer to a complete key.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span>&lt;<span class="xref">System.Collections.Generic.IReadOnlyList</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>&gt;&gt;</td>
        <td><p>A collection of entities with the same size as <code data-dev-comment-type="paramref" class="paramref">keys</code>, containing corresponding entity
references, or <code>null</code> where the key was not found.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_Google_Cloud_Datastore_V1_Key____remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
This call may perform multiple RPC operations in order to look up all keys.
</p>
<p>
This overload does not support the <a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a> to be specified due to restrictions with
methods containing a parameter array and optional parameters.
It simply delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__Google_Api_Gax_Grpc_CallSettings_">LookupAsync(IEnumerable&lt;Key&gt;, CallSettings)</a>, passing in a <code>null</code>
value for the call settings.
</p>
<p>Datastore limits the number of entities that can be looked up in a single operation. When looking up a large
number of entities, partition the look-ups into batches. See
<a href="https://cloud.google.com/datastore/docs/concepts/limits">Datastore limits</a> for more details on Datastore limits.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_Google_Cloud_Datastore_V1_Key____snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key___">Lookup</a> for a synchronous example.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.LookupAsync*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.LookupAsync(System.Collections.Generic.IEnumerable{Google.Cloud.Datastore.V1.Key},Google.Api.Gax.Grpc.CallSettings)">LookupAsync(IEnumerable&lt;Key&gt;, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Looks up a collection of entities by key asynchronously.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task&lt;IReadOnlyList&lt;Entity&gt;&gt; LookupAsync(IEnumerable&lt;Key&gt; keys, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IEnumerable</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Key.html">Key</a>&gt;</td>
        <td><span class="parametername">keys</span></td>
        <td><p>The keys to look up. Must not be null, and every element must be non-null and refer to a complete key.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span>&lt;<span class="xref">System.Collections.Generic.IReadOnlyList</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>&gt;&gt;</td>
        <td><p>A collection of entities with the same size as <code data-dev-comment-type="paramref" class="paramref">keys</code>, containing corresponding entity
references, or <code>null</code> where the key was not found.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This call may perform multiple RPC operations in order to look up all keys.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_LookupAsync_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Key__Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Lookup_Google_Cloud_Datastore_V1_Key___">Lookup</a> for a synchronous example.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Rollback_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Rollback*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Rollback_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Rollback(Google.Api.Gax.Grpc.CallSettings)">Rollback(CallSettings)</h4>
  <div class="markdown level1 summary"><p>Rolls back this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual RollbackResponse Rollback(CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.RollbackResponse.html">RollbackResponse</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Rollback_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method is rarely useful explicitly; the <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Dispose">Dispose()</a> method rolls back the transaction if it
is still active, so a <code>using</code> statement is normally preferable to this.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Rollback_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><p>See [RollbackAsync] for an asynchronous example.</p>
</div>
  </div>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.InvalidOperationException</span></td>
        <td><p>The transaction has already been committed or rolled back.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_RollbackAsync_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RollbackAsync*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RollbackAsync_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RollbackAsync(Google.Api.Gax.Grpc.CallSettings)">RollbackAsync(CallSettings)</h4>
  <div class="markdown level1 summary"><p>Rolls back this transaction asynchronously.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task&lt;RollbackResponse&gt; RollbackAsync(CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.RollbackResponse.html">RollbackResponse</a>&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RollbackAsync_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method is rarely useful explicitly; the <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Dispose">Dispose()</a> method rolls back the transaction if it
is still active, so a <code>using</code> statement is normally preferable to this.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RollbackAsync_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;message&quot;);

// Dispose automatically rolls back an uncommitted transaction synchronously.
// To roll back asynchronously, 
bool committed = false;
DatastoreTransaction transaction = await db.BeginTransactionAsync();
try
{
    Entity message = new Entity
    {
        Key = keyFactory.CreateIncompleteKey(),
        [&quot;text&quot;] = &quot;Hello&quot;,
    };
    // This adds the entity to a collection in memory: nothing
    // is sent to the server.
    db.Insert(message);

    // Attempt to commit the transaction asynchronously.
    await transaction.CommitAsync();
    committed = true;
}
finally
{
    if (!committed)
    {
        // Roll back asynchronously if anything failed.
        await transaction.RollbackAsync();
    }
}
</code></pre></div>
  </div>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.InvalidOperationException</span></td>
        <td><p>The transaction has already been committed or rolled back.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQuery_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQuery*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQuery_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQuery(Google.Cloud.Datastore.V1.GqlQuery,Google.Api.Gax.Grpc.CallSettings)">RunQuery(GqlQuery, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Runs the given query eagerly in this transaction, retrieving all results in memory and indicating whether more
results may be available beyond the query&apos;s limit. Use this method when your query has a limited
number of results, for example to build a web application which fetches results in pages.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual DatastoreQueryResults RunQuery(GqlQuery query, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.GqlQuery.html">GqlQuery</a></td>
        <td><span class="parametername">query</span></td>
        <td><p>The query to execute. Must not be null.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.DatastoreQueryResults.html">DatastoreQueryResults</a></td>
        <td><p>The complete query results.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQuery_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
Using a transaction ensures that a commit operation will fail if any of the entities returned
by this query have been modified while the transaction is active. Note that modifications performed
as part of this operation are not reflected in the query results.
</p>
<p>The default implementation of this method delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings_">RunQueryLazily(GqlQuery, CallSettings)</a>
and calls <a class="xref" href="Google.Cloud.Datastore.V1.LazyDatastoreQuery.html#Google_Cloud_Datastore_V1_LazyDatastoreQuery_GetAllResults">GetAllResults()</a> on the return value.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQuery_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;player&quot;);

// Prepare the data: a player with two game child entities
Entity player = new Entity
{
    Key = keyFactory.CreateIncompleteKey(),
    [&quot;name&quot;] = &quot;Sophie&quot;
};
Key playerKey = db.Insert(player);
Entity game1 = new Entity
{
    Key = playerKey.WithElement(new PathElement { Kind = &quot;game&quot; }),
    [&quot;score&quot;] = 10,
    [&quot;timestamp&quot;] = new DateTime(2017, 2, 16, 8, 35, 0, DateTimeKind.Utc)
};
Entity game2 = new Entity
{
    Key = playerKey.WithElement(new PathElement { Kind = &quot;game&quot; }),
    [&quot;score&quot;] = 25,
    [&quot;timestamp&quot;] = new DateTime(2017, 3, 15, 10, 35, 0, DateTimeKind.Utc)
};
db.Insert(game1, game2);

// Perform a query within a transaction
using (DatastoreTransaction transaction = db.BeginTransaction())
{
    // Any query executed in a transaction must at least have an ancestor filter.
    GqlQuery query = new GqlQuery
    {
        QueryString = &quot;SELECT * FROM game WHERE __key__ HAS ANCESTOR @player LIMIT @limit&quot;,
        NamedBindings = {
            { &quot;player&quot;, playerKey },
            { &quot;limit&quot;, 10 }
        }
    };
    DatastoreQueryResults results = db.RunQuery(query);
    // RunQuery fetches all the results into memory in a single call.
    // Constrast this with RunQueryLazily, which merely prepares an enumerable
    // query. Always specify a limit when you use RunQuery, to avoid running
    // out of memory.
    foreach (Entity entity in results.Entities)
    {
        Console.WriteLine(entity);
    }
}
</code></pre></div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQuery_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQuery*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQuery_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQuery(Google.Cloud.Datastore.V1.Query,Google.Api.Gax.Grpc.CallSettings)">RunQuery(Query, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Runs the given query eagerly in this transaction, retrieving all results in memory and indicating whether more
results may be available beyond the query&apos;s limit. Use this method when your query has a limited
number of results, for example to build a web application which fetches results in pages.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual DatastoreQueryResults RunQuery(Query query, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Query.html">Query</a></td>
        <td><span class="parametername">query</span></td>
        <td><p>The query to execute. Must not be null.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.DatastoreQueryResults.html">DatastoreQueryResults</a></td>
        <td><p>The complete query results.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQuery_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
Using a transaction ensures that a commit operation will fail if any of the entities returned
by this query have been modified while the transaction is active. Note that modifications performed
as part of this operation are not reflected in the query results.
</p>
<p>The default implementation of this method delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings_">RunQueryLazily(Query, CallSettings)</a>
and calls <a class="xref" href="Google.Cloud.Datastore.V1.LazyDatastoreQuery.html#Google_Cloud_Datastore_V1_LazyDatastoreQuery_GetAllResults">GetAllResults()</a> on the return value.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQuery_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;player&quot;);

// Prepare the data: a player with two game child entities
Entity player = new Entity
{
    Key = keyFactory.CreateIncompleteKey(),
    [&quot;name&quot;] = &quot;Sophie&quot;
};
Key playerKey = db.Insert(player);
Entity game1 = new Entity
{
    Key = playerKey.WithElement(new PathElement { Kind = &quot;game&quot; }),
    [&quot;score&quot;] = 10,
    [&quot;timestamp&quot;] = new DateTime(2017, 2, 16, 8, 35, 0, DateTimeKind.Utc)
};
Entity game2 = new Entity
{
    Key = playerKey.WithElement(new PathElement { Kind = &quot;game&quot; }),
    [&quot;score&quot;] = 25,
    [&quot;timestamp&quot;] = new DateTime(2017, 3, 15, 10, 35, 0, DateTimeKind.Utc)
};
db.Insert(game1, game2);

// Perform a query within a transaction
using (DatastoreTransaction transaction = db.BeginTransaction())
{
    // Any query executed in a transaction must at least have an ancestor filter.
    Query query = new Query(&quot;game&quot;)
    {
        Filter = Filter.HasAncestor(playerKey),
        Limit = 10
    };
    DatastoreQueryResults results = db.RunQuery(query);
    // RunQuery fetches all the results into memory in a single call.
    // Constrast this with RunQueryLazily, which merely prepares an enumerable
    // query. Always specify a limit when you use RunQuery, to avoid running
    // out of memory.
    foreach (Entity entity in results.Entities)
    {
        Console.WriteLine(entity);
    }
}
</code></pre></div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryAsync_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryAsync*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryAsync_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryAsync(Google.Cloud.Datastore.V1.GqlQuery,Google.Api.Gax.Grpc.CallSettings)">RunQueryAsync(GqlQuery, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Runs the given query eagerly and asynchronously in this transaction, retrieving all results in memory and indicating whether more
results may be available beyond the query&apos;s limit. Use this method when your query has a limited
number of results, for example to build a web application which fetches results in pages.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task&lt;DatastoreQueryResults&gt; RunQueryAsync(GqlQuery query, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.GqlQuery.html">GqlQuery</a></td>
        <td><span class="parametername">query</span></td>
        <td><p>The query to execute. Must not be null.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.DatastoreQueryResults.html">DatastoreQueryResults</a>&gt;</td>
        <td><p>A task representing the asynchronous operation. The result of the task is the complete set of query results.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryAsync_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
Using a transaction ensures that a commit operation will fail if any of the entities returned
by this query have been modified while the transaction is active. Note that modifications performed
as part of this operation are not reflected in the query results.
</p>
<p>The default implementation of this method delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazilyAsync_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings_">RunQueryLazilyAsync(GqlQuery, CallSettings)</a>
and calls <a class="xref" href="Google.Cloud.Datastore.V1.AsyncLazyDatastoreQuery.html#Google_Cloud_Datastore_V1_AsyncLazyDatastoreQuery_GetAllResultsAsync">GetAllResultsAsync()</a> on the return value.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryAsync_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_RunQuery_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings_">RunQuery</a> for a synchronous example.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryAsync_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryAsync*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryAsync_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryAsync(Google.Cloud.Datastore.V1.Query,Google.Api.Gax.Grpc.CallSettings)">RunQueryAsync(Query, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Runs the given query eagerly and asynchronously in this transaction, retrieving all results in memory
and indicating whether more results may be available beyond the query&apos;s limit. Use this method when your query has a limited
number of results, for example to build a web application which fetches results in pages.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task&lt;DatastoreQueryResults&gt; RunQueryAsync(Query query, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Query.html">Query</a></td>
        <td><span class="parametername">query</span></td>
        <td><p>The query to execute. Must not be null.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.DatastoreQueryResults.html">DatastoreQueryResults</a>&gt;</td>
        <td><p>A task representing the asynchronous operation. The result of the task is the complete set of query results.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryAsync_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
Using a transaction ensures that a commit operation will fail if any of the entities returned
by this query have been modified while the transaction is active. Note that modifications performed
as part of this operation are not reflected in the query results.
</p>
<p>The default implementation of this method delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazilyAsync_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings_">RunQueryLazilyAsync(Query, CallSettings)</a>
and calls <a class="xref" href="Google.Cloud.Datastore.V1.AsyncLazyDatastoreQuery.html#Google_Cloud_Datastore_V1_AsyncLazyDatastoreQuery_GetAllResultsAsync">GetAllResultsAsync()</a> on the return value.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryAsync_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_RunQuery_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings_">RunQueryLazily</a> for a synchronous example.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryLazily*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryLazily(Google.Cloud.Datastore.V1.GqlQuery,Google.Api.Gax.Grpc.CallSettings)">RunQueryLazily(GqlQuery, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Lazily executes the given GQL query in this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual LazyDatastoreQuery RunQueryLazily(GqlQuery gqlQuery, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.GqlQuery.html">GqlQuery</a></td>
        <td><span class="parametername">gqlQuery</span></td>
        <td><p>The query to execute. Must not be null.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.LazyDatastoreQuery.html">LazyDatastoreQuery</a></td>
        <td><p>A <a class="xref" href="Google.Cloud.Datastore.V1.LazyDatastoreQuery.html">LazyDatastoreQuery</a> representing the result of the query.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
Using a transaction ensures that a commit operation will fail if any of the entities returned
by this query have been modified while the transaction is active. Note that modifications performed
as part of this operation are not reflected in the query results.
</p>
<p>
The results are requested lazily: no API calls will be made until the application starts
iterating over the results. Iterating over the same <a class="xref" href="Google.Cloud.Datastore.V1.LazyDatastoreQuery.html">LazyDatastoreQuery</a> object
multiple times will execute the query again, potentially returning different results.
</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;player&quot;);

// Prepare the data: a player with two game child entities
Entity player = new Entity
{
    Key = keyFactory.CreateIncompleteKey(),
    [&quot;name&quot;] = &quot;Sophie&quot;
};
Key playerKey = db.Insert(player);
Entity game1 = new Entity
{
    Key = playerKey.WithElement(new PathElement { Kind = &quot;game&quot; }),
    [&quot;score&quot;] = 10,
    [&quot;timestamp&quot;] = new DateTime(2017, 2, 16, 8, 35, 0, DateTimeKind.Utc)
};
Entity game2 = new Entity
{
    Key = playerKey.WithElement(new PathElement { Kind = &quot;game&quot; }),
    [&quot;score&quot;] = 25,
    [&quot;timestamp&quot;] = new DateTime(2017, 3, 15, 10, 35, 0, DateTimeKind.Utc)
};
db.Insert(game1, game2);

// Perform a query within a transaction
using (DatastoreTransaction transaction = db.BeginTransaction())
{
    // Any query executed in a transaction must at least have an ancestor filter.
    GqlQuery query = new GqlQuery
    {
        QueryString = &quot;SELECT * FROM game WHERE __key__ HAS ANCESTOR @player&quot;,
        NamedBindings = { { &quot;player&quot;, playerKey } }
    };
    LazyDatastoreQuery results = db.RunQueryLazily(query);
    // LazyDatastoreQuery implements IEnumerable&lt;Entity&gt;, but you can
    // call AsResponses() to see the raw RPC responses, or
    // GetAllResults() to get all the results into memory, complete with
    // the end cursor and the reason for the query finishing.
    foreach (Entity entity in results)
    {
        Console.WriteLine(entity);
    }
}
</code></pre></div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryLazily*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryLazily(Google.Cloud.Datastore.V1.Query,Google.Api.Gax.Grpc.CallSettings)">RunQueryLazily(Query, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Lazily executes the given structured query in this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual LazyDatastoreQuery RunQueryLazily(Query query, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Query.html">Query</a></td>
        <td><span class="parametername">query</span></td>
        <td><p>The query to execute. Must not be null.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.LazyDatastoreQuery.html">LazyDatastoreQuery</a></td>
        <td><p>A <a class="xref" href="Google.Cloud.Datastore.V1.LazyDatastoreQuery.html">LazyDatastoreQuery</a> representing the the lazy query results.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
Using a transaction ensures that a commit operation will fail if any of the entities returned
by this query have been modified while the transaction is active. Note that modifications performed
as part of this operation are not reflected in the query results.
</p>
<p>
The results are requested lazily: no API calls will be made until the application starts
iterating over the results. Iterating over the same <a class="xref" href="Google.Cloud.Datastore.V1.LazyDatastoreQuery.html">LazyDatastoreQuery</a> object
multiple times will execute the query again, potentially returning different results.
</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;player&quot;);

// Prepare the data: a player with two game child entities
Entity player = new Entity
{
    Key = keyFactory.CreateIncompleteKey(),
    [&quot;name&quot;] = &quot;Sophie&quot;
};
Key playerKey = db.Insert(player);
Entity game1 = new Entity
{
    Key = playerKey.WithElement(new PathElement { Kind = &quot;game&quot; }),
    [&quot;score&quot;] = 10,
    [&quot;timestamp&quot;] = new DateTime(2017, 2, 16, 8, 35, 0, DateTimeKind.Utc)
};
Entity game2 = new Entity
{
    Key = playerKey.WithElement(new PathElement { Kind = &quot;game&quot; }),
    [&quot;score&quot;] = 25,
    [&quot;timestamp&quot;] = new DateTime(2017, 3, 15, 10, 35, 0, DateTimeKind.Utc)
};
db.Insert(game1, game2);

// Perform a query within a transaction
using (DatastoreTransaction transaction = db.BeginTransaction())
{
    // Any query executed in a transaction must at least have an ancestor filter.
    Query query = new Query(&quot;game&quot;)
    {
        Filter = Filter.HasAncestor(playerKey)
    };
    LazyDatastoreQuery results = db.RunQueryLazily(query);
    // LazyDatastoreQuery implements IEnumerable&lt;Entity&gt;, but you can
    // call AsResponses() to see the raw RPC responses, or
    // GetAllResults() to get all the results into memory, complete with
    // the end cursor and the reason for the query finishing.
    foreach (Entity entity in results)
    {
        Console.WriteLine(entity);
    }
}
</code></pre></div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazilyAsync_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryLazilyAsync*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazilyAsync_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryLazilyAsync(Google.Cloud.Datastore.V1.GqlQuery,Google.Api.Gax.Grpc.CallSettings)">RunQueryLazilyAsync(GqlQuery, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Lazily executes the given structured query in this transaction for asynchronous consumption.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual AsyncLazyDatastoreQuery RunQueryLazilyAsync(GqlQuery gqlQuery, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.GqlQuery.html">GqlQuery</a></td>
        <td><span class="parametername">gqlQuery</span></td>
        <td><p>The query to execute. Must not be null.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.AsyncLazyDatastoreQuery.html">AsyncLazyDatastoreQuery</a></td>
        <td><p>An <a class="xref" href="Google.Cloud.Datastore.V1.AsyncLazyDatastoreQuery.html">AsyncLazyDatastoreQuery</a> representing the result of the query.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazilyAsync_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
Using a transaction ensures that a commit operation will fail if any of the entities returned
by this query have been modified while the transaction is active. Note that modifications performed
as part of this operation are not reflected in the query results.
</p>
<p>
The results are requested lazily: no API calls will be made until the application starts
iterating over the results. Iterating over the same <a class="xref" href="Google.Cloud.Datastore.V1.LazyDatastoreQuery.html">LazyDatastoreQuery</a> object
multiple times will execute the query again, potentially returning different results.
</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazilyAsync_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_Google_Cloud_Datastore_V1_GqlQuery_Google_Api_Gax_Grpc_CallSettings_">RunQueryLazily</a> for a synchronous example.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazilyAsync_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryLazilyAsync*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazilyAsync_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.RunQueryLazilyAsync(Google.Cloud.Datastore.V1.Query,Google.Api.Gax.Grpc.CallSettings)">RunQueryLazilyAsync(Query, CallSettings)</h4>
  <div class="markdown level1 summary"><p>Lazily executes the given structured query in this transaction for asynchronous consumption.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual AsyncLazyDatastoreQuery RunQueryLazilyAsync(Query query, CallSettings callSettings = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Query.html">Query</a></td>
        <td><span class="parametername">query</span></td>
        <td><p>The query to execute. Must not be null.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Api.Gax.Grpc.CallSettings.html">CallSettings</a></td>
        <td><span class="parametername">callSettings</span></td>
        <td><p>If not null, applies overrides to RPC calls.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.AsyncLazyDatastoreQuery.html">AsyncLazyDatastoreQuery</a></td>
        <td><p>An <a class="xref" href="Google.Cloud.Datastore.V1.AsyncLazyDatastoreQuery.html">AsyncLazyDatastoreQuery</a> representing the result of the query.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazilyAsync_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
Using a transaction ensures that a commit operation will fail if any of the entities returned
by this query have been modified while the transaction is active. Note that modifications performed
as part of this operation are not reflected in the query results.
</p>
<p>
The results are requested lazily: no API calls will be made until the application starts
iterating over the results. Iterating over the same <a class="xref" href="Google.Cloud.Datastore.V1.LazyDatastoreQuery.html">LazyDatastoreQuery</a> object
multiple times will execute the query again, potentially returning different results.
</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazilyAsync_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings__snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_RunQueryLazily_Google_Cloud_Datastore_V1_Query_Google_Api_Gax_Grpc_CallSettings_">RunQueryLazily</a> for a synchronous example.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Update_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Update*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Update_Google_Cloud_Datastore_V1_Entity___" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Update(Google.Cloud.Datastore.V1.Entity[])">Update(Entity[])</h4>
  <div class="markdown level1 summary"><p>Adds update operations for all the specified keys to this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Update(params Entity[] entities)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>[]</td>
        <td><span class="parametername">entities</span></td>
        <td><p>The entities to update. Must not be null.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Update_Google_Cloud_Datastore_V1_Entity____remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Update_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__">Update(IEnumerable&lt;Entity&gt;)</a>.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Update_Google_Cloud_Datastore_V1_Entity____snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;book&quot;);
Entity book = new Entity
{
    Key = keyFactory.CreateIncompleteKey(),
    [&quot;author&quot;] = &quot;Harper Lee&quot;,
    [&quot;title&quot;] = &quot;Tequila Mockingbird&quot;,
    [&quot;publication_date&quot;] = new DateTime(1960, 7, 11, 0, 0, 0, DateTimeKind.Utc),
    [&quot;genres&quot;] = new[] { &quot;Southern drama&quot;, &quot;Courtroom drama&quot;, &quot;Bildungsroman&quot; }
};
db.Insert(book);

using (DatastoreTransaction transaction = db.BeginTransaction())
{
    // Correct the typo in memory
    book[&quot;title&quot;] = &quot;To Kill a Mockingbird&quot;;
    // This adds the entity to a collection of mutations in memory: nothing
    // is sent to the server.
    transaction.Update(book);
    // Without the Commit call, the transaction will automatically
    // be rolled back. The Commit call performs all the mutations
    // within the transaction.
    transaction.Commit();
}
</code></pre></div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Update_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Update*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Update_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Update(System.Collections.Generic.IEnumerable{Google.Cloud.Datastore.V1.Entity})">Update(IEnumerable&lt;Entity&gt;)</h4>
  <div class="markdown level1 summary"><p>Adds update operations for all the specified keys to this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Update(IEnumerable&lt;Entity&gt; entities)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IEnumerable</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>&gt;</td>
        <td><span class="parametername">entities</span></td>
        <td><p>The entities to update. Must not be null.</p>
</td>
      </tr>
    </tbody>
  </table>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Update_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity___snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Update_Google_Cloud_Datastore_V1_Entity___">Update</a> for an example using an alternative overload.</p>
</div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Upsert_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Upsert*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Upsert_Google_Cloud_Datastore_V1_Entity___" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Upsert(Google.Cloud.Datastore.V1.Entity[])">Upsert(Entity[])</h4>
  <div class="markdown level1 summary"><p>Adds upsert operations for all the specified keys to this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Upsert(params Entity[] entities)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>[]</td>
        <td><span class="parametername">entities</span></td>
        <td><p>The entities to upsert. Must not be null.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Upsert_Google_Cloud_Datastore_V1_Entity____remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method delegates to <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Upsert_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__">Upsert(IEnumerable&lt;Entity&gt;)</a>.</p>
</div>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Upsert_Google_Cloud_Datastore_V1_Entity____snippet">Sample code</h5>
  <div class="markdown level1"><pre><code class="lang-cs">DatastoreDb db = DatastoreDb.Create(projectId, namespaceId);
KeyFactory keyFactory = db.CreateKeyFactory(&quot;book&quot;);
Entity book1 = new Entity
{
    Key = keyFactory.CreateIncompleteKey(),
    [&quot;author&quot;] = &quot;Harper Lee&quot;,
    [&quot;title&quot;] = &quot;Tequila Mockingbird&quot;,
    [&quot;publication_date&quot;] = new DateTime(1960, 7, 11, 0, 0, 0, DateTimeKind.Utc),
    [&quot;genres&quot;] = new[] { &quot;Southern drama&quot;, &quot;Courtroom drama&quot;, &quot;Bildungsroman&quot; }
};
db.Insert(book1);

using (DatastoreTransaction transaction = db.BeginTransaction())
{
    // Correct the typo in memory
    book1[&quot;title&quot;] = &quot;To Kill a Mockingbird&quot;;

    Entity book2 = new Entity
    {
        Key = keyFactory.CreateIncompleteKey(),
        [&quot;author&quot;] = &quot;Charlotte Bront&#235;&quot;,
        [&quot;title&quot;] = &quot;Jane Eyre&quot;,
        [&quot;publication_date&quot;] = new DateTime(1847, 10, 16, 0, 0, 0, DateTimeKind.Utc),
        [&quot;genres&quot;] = new[] { &quot;Gothic&quot;, &quot;Romance&quot;, &quot;Bildungsroman&quot; }
    };

    // This adds the entities to a collection of mutations in memory: nothing
    // is sent to the server.
    transaction.Upsert(book1, book2);
    // Without the Commit call, the transaction will automatically
    // be rolled back. The Commit call performs all the mutations
    // within the transaction.
    transaction.Commit();
}
</code></pre></div>
  </div>
  <a id="Google_Cloud_Datastore_V1_DatastoreTransaction_Upsert_" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Upsert*"></a>
  <h4 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Upsert_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity__" data-uid="Google.Cloud.Datastore.V1.DatastoreTransaction.Upsert(System.Collections.Generic.IEnumerable{Google.Cloud.Datastore.V1.Entity})">Upsert(IEnumerable&lt;Entity&gt;)</h4>
  <div class="markdown level1 summary"><p>Adds upsert operations for all the specified keys to this transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Upsert(IEnumerable&lt;Entity&gt; entities)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IEnumerable</span>&lt;<a class="xref" href="Google.Cloud.Datastore.V1.Entity.html">Entity</a>&gt;</td>
        <td><span class="parametername">entities</span></td>
        <td><p>The entities to upsert. Must not be null.</p>
</td>
      </tr>
    </tbody>
  </table>
  <div>
  <h5 id="Google_Cloud_Datastore_V1_DatastoreTransaction_Upsert_System_Collections_Generic_IEnumerable_Google_Cloud_Datastore_V1_Entity___snippet">Sample code</h5>
  <div class="markdown level1"><p>See <a class="xref" href="Google.Cloud.Datastore.V1.DatastoreTransaction.html#Google_Cloud_Datastore_V1_DatastoreTransaction_Upsert_Google_Cloud_Datastore_V1_Entity___">Upsert</a> for an example using an alternative overload.</p>
</div>
  </div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
             
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
